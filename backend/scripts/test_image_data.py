#!/usr/bin/env python3
"""
Test script to verify the updated data matches the image
"""

import os
import sys
sys.path.append('/code')

def test_image_data_mapping():
    """Test that the data matches the image values"""
    print("üß™ Testing Image Data Mapping")
    print("=" * 50)
    
    # Data from the image (2m, 5m, 15m, 30m, 1h columns)
    image_data = {
        'NVDA': {'2m': 0.47, '5m': 0.47, '15m': 0.22, '30m': 0.47, '1h': 0.07},
        'MSFT': {'2m': 1.74, '5m': 1.74, '15m': 1.74, '30m': 1.74, '1h': 1.74},
        'AAPL': {'2m': 0.85, '5m': 0.85, '15m': 0.85, '30m': 0.85, '1h': 0.85},
        'AMZN': {'2m': 0.92, '5m': 0.92, '15m': 0.92, '30m': 0.92, '1h': 0.92},
        'AVGO': {'2m': 0.68, '5m': 0.68, '15m': 0.68, '30m': 0.68, '1h': 0.68},
        'META': {'2m': 1.15, '5m': 1.15, '15m': 1.15, '30m': 1.15, '1h': 1.15},
        'NFLX': {'2m': 0.73, '5m': 0.73, '15m': 0.73, '30m': 0.73, '1h': 0.73},
        'TSLA': {'2m': 1.28, '5m': 1.28, '15m': 1.28, '30m': 1.28, '1h': 1.28},
        'GOOGL': {'2m': 0.95, '5m': 0.95, '15m': 0.95, '30m': 0.95, '1h': 0.95},
        'GOOG': {'2m': 0.95, '5m': 0.95, '15m': 0.95, '30m': 0.95, '1h': 0.95},
        'COST': {'2m': 0.42, '5m': 0.42, '15m': 0.42, '30m': 0.42, '1h': 0.42},
        'PLTR': {'2m': 0.89, '5m': 0.89, '15m': 0.89, '30m': 0.89, '1h': 0.89},
        'CSCO': {'2m': 0.56, '5m': 0.56, '15m': 0.56, '30m': 0.56, '1h': 0.56},
        'TMUS': {'2m': 0.78, '5m': 0.78, '15m': 0.78, '30m': 0.78, '1h': 0.78},
        'AMD': {'2m': 1.02, '5m': 1.02, '15m': 1.02, '30m': 1.02, '1h': 1.02},
        'LIN': {'2m': 0.65, '5m': 0.65, '15m': 0.65, '30m': 0.65, '1h': 0.65},
        'INTU': {'2m': 0.88, '5m': 0.88, '15m': 0.88, '30m': 0.88, '1h': 0.88},
        'PEP': {'2m': 0.34, '5m': 0.34, '15m': 0.34, '30m': 0.34, '1h': 0.34},
        'SHOP': {'2m': 1.12, '5m': 1.12, '15m': 1.12, '30m': 1.12, '1h': 1.12},
        'BKNG': {'2m': 0, '5m': 0, '15m': 0, '30m': 0, '1h': 0},
        'ISRG': {'2m': 0.76, '5m': 0.76, '15m': 0.76, '30m': 0.76, '1h': 0.76},
        'TXN': {'2m': 0.58, '5m': 0.58, '15m': 0.58, '30m': 0.58, '1h': 0.58},
        'QCOM': {'2m': 0.71, '5m': 0.71, '15m': 0.71, '30m': 0.71, '1h': 0.71},
        'AMGN': {'2m': 0.49, '5m': 0.49, '15m': 0.49, '30m': 0.49, '1h': 0.49},
        'ADBE': {'2m': 0.83, '5m': 0.83, '15m': 0.83, '30m': 0.83, '1h': 0.83},
        'TQQQ': {'2m': 0.67, '5m': 0.67, '15m': 0.67, '30m': 0.67, '1h': 0.67}
    }
    
    # Updated data from workflow (with 1m added as 0.33 for all)
    workflow_data = {
        'NVDA': {'1m': 0.33, '2m': 0.47, '5m': 0.47, '15m': 0.22, '30m': 0.47, '1h': 0.07},
        'MSFT': {'1m': 0.33, '2m': 1.74, '5m': 1.74, '15m': 1.74, '30m': 1.74, '1h': 1.74},
        'AAPL': {'1m': 0.33, '2m': 0.85, '5m': 0.85, '15m': 0.85, '30m': 0.85, '1h': 0.85},
        'AMZN': {'1m': 0.33, '2m': 0.92, '5m': 0.92, '15m': 0.92, '30m': 0.92, '1h': 0.92},
        'AVGO': {'1m': 0.33, '2m': 0.68, '5m': 0.68, '15m': 0.68, '30m': 0.68, '1h': 0.68},
        'META': {'1m': 0.33, '2m': 1.15, '5m': 1.15, '15m': 1.15, '30m': 1.15, '1h': 1.15},
        'NFLX': {'1m': 0.33, '2m': 0.73, '5m': 0.73, '15m': 0.73, '30m': 0.73, '1h': 0.73},
        'TSLA': {'1m': 0.33, '2m': 1.28, '5m': 1.28, '15m': 1.28, '30m': 1.28, '1h': 1.28},
        'GOOGL': {'1m': 0.33, '2m': 0.95, '5m': 0.95, '15m': 0.95, '30m': 0.95, '1h': 0.95},
        'GOOG': {'1m': 0.33, '2m': 0.95, '5m': 0.95, '15m': 0.95, '30m': 0.95, '1h': 0.95},
        'COST': {'1m': 0.33, '2m': 0.42, '5m': 0.42, '15m': 0.42, '30m': 0.42, '1h': 0.42},
        'PLTR': {'1m': 0.33, '2m': 0.89, '5m': 0.89, '15m': 0.89, '30m': 0.89, '1h': 0.89},
        'CSCO': {'1m': 0.33, '2m': 0.56, '5m': 0.56, '15m': 0.56, '30m': 0.56, '1h': 0.56},
        'TMUS': {'1m': 0.33, '2m': 0.78, '5m': 0.78, '15m': 0.78, '30m': 0.78, '1h': 0.78},
        'AMD': {'1m': 0.33, '2m': 1.02, '5m': 1.02, '15m': 1.02, '30m': 1.02, '1h': 1.02},
        'LIN': {'1m': 0.33, '2m': 0.65, '5m': 0.65, '15m': 0.65, '30m': 0.65, '1h': 0.65},
        'INTU': {'1m': 0.33, '2m': 0.88, '5m': 0.88, '15m': 0.88, '30m': 0.88, '1h': 0.88},
        'PEP': {'1m': 0.33, '2m': 0.34, '5m': 0.34, '15m': 0.34, '30m': 0.34, '1h': 0.34},
        'SHOP': {'1m': 0.33, '2m': 1.12, '5m': 1.12, '15m': 1.12, '30m': 1.12, '1h': 1.12},
        'BKNG': {'1m': 0.33, '2m': 0, '5m': 0, '15m': 0, '30m': 0, '1h': 0},
        'ISRG': {'1m': 0.33, '2m': 0.76, '5m': 0.76, '15m': 0.76, '30m': 0.76, '1h': 0.76},
        'TXN': {'1m': 0.33, '2m': 0.58, '5m': 0.58, '15m': 0.58, '30m': 0.58, '1h': 0.58},
        'QCOM': {'1m': 0.33, '2m': 0.71, '5m': 0.71, '15m': 0.71, '30m': 0.71, '1h': 0.71},
        'AMGN': {'1m': 0.33, '2m': 0.49, '5m': 0.49, '15m': 0.49, '30m': 0.49, '1h': 0.49},
        'ADBE': {'1m': 0.33, '2m': 0.83, '5m': 0.83, '15m': 0.83, '30m': 0.83, '1h': 0.83},
        'TQQQ': {'1m': 0.33, '2m': 0.67, '5m': 0.67, '15m': 0.67, '30m': 0.67, '1h': 0.67}
    }
    
    print("üìä Comparing Image Data vs Workflow Data:")
    print("-" * 50)
    
    all_match = True
    for symbol in image_data:
        print(f"\n{symbol}:")
        for tf in ['2m', '5m', '15m', '30m', '1h']:
            image_val = image_data[symbol][tf]
            workflow_val = workflow_data[symbol][tf]
            match = "‚úÖ" if image_val == workflow_val else "‚ùå"
            print(f"  {tf}: {match} Image={image_val}, Workflow={workflow_val}")
            if image_val != workflow_val:
                all_match = False
    
    print(f"\n{'='*50}")
    if all_match:
        print("üéâ All data matches the image perfectly!")
    else:
        print("‚ö†Ô∏è Some data does not match the image")
    print(f"{'='*50}")
    
    # Show 1m values (all should be 0.33)
    print(f"\nüìà 1m Timeframe Values (all should be 0.33):")
    print("-" * 40)
    for symbol in workflow_data:
        val = workflow_data[symbol]['1m']
        status = "‚úÖ" if val == 0.33 else "‚ùå"
        print(f"  {symbol}: {status} {val}")

if __name__ == "__main__":
    test_image_data_mapping()
